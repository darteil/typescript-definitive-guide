<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script async="" type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/279c6d27f726e2cae573.css" as="style"/><link rel="stylesheet" href="/_next/static/css/279c6d27f726e2cae573.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-bae6c3d363e548fddd65.js" defer=""></script><script src="/_next/static/chunks/pages/_app-73829bb7425a95cd172f.js" defer=""></script><script src="/_next/static/chunks/452-2343a28788c03f958a4e.js" defer=""></script><script src="/_next/static/chunks/950-86a83352b01b7466f89f.js" defer=""></script><script src="/_next/static/chunks/222-f79b6bb9bf6211af52b8.js" defer=""></script><script src="/_next/static/chunks/460-cf93e771b3da01004124.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-d4969ecab0eef9742617.js" defer=""></script><script src="/_next/static/chunks/803-f45dccf783085a28ea16.js" defer=""></script><script src="/_next/static/chunks/pages/book/chapters/%5BchapterId%5D-90bdf3606f579e2b38ce.js" defer=""></script><script src="/_next/static/wm38oMjLpjy8eoMz2Xf2L/_buildManifest.js" defer=""></script><script src="/_next/static/wm38oMjLpjy8eoMz2Xf2L/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 119.45 44" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><g id="logo_app_svg__logo"><path id="logo_app_svg__logo_t" d="M38.41 3v8.11H25.67v34.1h-9.5V11.08H3.43V3z" transform="translate(-3.43 -2)" fill="#3273b9"></path><path id="logo_app_svg__logo_g" class="logo_app_svg__cls-2" d="M63.7 10.29q-6.63 0-9.6 3.69c-2 2.45-3 5.82-3 10.08a20.23 20.23 0 00.73 5.64 12.6 12.6 0 002.19 4.36 10 10 0 003.66 2.83 12.18 12.18 0 005.12 1c1.06 0 2 0 2.71-.07a13.08 13.08 0 002-.24V22.9h9.51v20.91a37.27 37.27 0 01-5.48 1.43 48.07 48.07 0 01-9.33.76 24.32 24.32 0 01-8.62-1.46A18.13 18.13 0 0147 40.27a19 19 0 01-4.23-6.89 26.92 26.92 0 01-1.49-9.32 25 25 0 011.64-9.39 20.25 20.25 0 014.51-6.91 19.11 19.11 0 016.74-4.3A23.25 23.25 0 0162.42 2a34 34 0 015.4.39 34.4 34.4 0 014.18.92 18.52 18.52 0 012.87 1.07 18 18 0 011.61.85l-2.78 7.62a24.88 24.88 0 00-4.48-1.8 19 19 0 00-5.52-.76z" transform="translate(-3.43 -2)"></path><path id="logo_app_svg__logo_d" class="logo_app_svg__cls-2" d="M122.88 24.06a24.63 24.63 0 01-1.71 9.57 17.6 17.6 0 01-4.84 6.76 20.69 20.69 0 01-7.65 4 35.63 35.63 0 01-10.12 1.34q-2.55 0-6-.22a48 48 0 01-6.7-.88V3.52a56.55 56.55 0 016.85-.82q3.57-.21 6.13-.21a36.72 36.72 0 019.84 1.22 20.22 20.22 0 017.59 3.83 17.06 17.06 0 014.87 6.71 25.33 25.33 0 011.74 9.81zM95.39 37.47q.67.06 1.56.09t2.1 0q7.13 0 10.57-3.59t3.45-9.94q0-6.64-3.29-10.06t-10.43-3.38h-2a16.72 16.72 0 00-2 .16z" transform="translate(-3.43 -2)"></path></g></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Sovmestimost_tipov_na_osnove_vida_tipizacii#Sovmestimost_tipov_(Types_Compatibility)">Совместимость типов (Types Compatibility)</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Sovmestimost_tipov_na_osnove_vida_tipizacii#Nominativnaya_Tipizaciya_(nominative_typing)">Номинативная Типизация (nominative typing)</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Sovmestimost_tipov_na_osnove_vida_tipizacii#Strukturnaya_Tipizaciya_(structural_typing)">Структурная Типизация (structural typing)</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Sovmestimost_tipov_na_osnove_vida_tipizacii#Utinaya_Tipizaciya_(Duck_typing)">Утиная Типизация (Duck typing)</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/mindyourlifeguide" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/35348648?v=4"/></span></a><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">3/22/2021</span></div></div></aside><section id="Sovmestimost_tipov_na_osnove_vida_tipizacii" class="content__section"><h1 class="content__heading">Совместимость типов на основе вида типизации</h1>
<p>Каждый раз при присваивании значения компилятор подвергает его проверке на совместимость с ожидаемым типом. Компилятор словно секюрити стоящий на фейсконтроле ночного клуба решает пропускать или нет то, или иное значение. Подобные решения принимаются на основании правил, которые зависят не только клуба (языка программирования), но также вида проводимых мероприятий. Понять логику на которую опирается компилятор при определении совместимости нам поможет текущая и следующая глава. Но сначала давайте выведем правило самой совместимости.</p></section><section id="Sovmestimost_tipov_(Types_Compatibility)" class="content__section"><h2 class="content__heading">Совместимость типов (Types Compatibility)</h2>
<p><em>Совместимость типов</em> — это совокупность правил, на основе которых программа, анализируя два типа, принимает решение о возможности одного типа заменить другой таким образом, что бы замена не нарушила выполнение программы. Простыми словами, совместимость типов — это механизм, по которому происходит сопоставление типов.</p>
<p>Существует несколько основных механизмов и выбор конкретного зависит от случая, при котором возникает потребность сопоставления типов данных. Один из таких механизмов состоит из совокупности правил составляющих такое понятие как типизация. Из существующего множества правил можно выделить несколько групп, которые образуют три вида типизации — <em>номинативную</em>, <em>структурную</em> и <em>утиную</em>.</p>
<p>Чтобы различия между ними были более очевидными, все они будут рассматриваться на одном примере, диаграмма которого показана ниже.</p>
<p><div class="ant-image" style="width:100%;height:200"><img alt="" class="ant-image-img" style="height:200" src="https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/nominative-types-shared.png"/></div></p></section><section id="Nominativnaya_Tipizaciya_(nominative_typing)" class="content__section"><h2 class="content__heading">Номинативная Типизация (nominative typing)</h2>
<p><em>Номинативная типизация</em> (nominative typing) устанавливает совместимость типов основываясь на идентификаторах типов (ссылках). Простыми словами, при проверке на совместимость компилятор проверяет иерархию типов на признаки наследования и реализацию интерфейсов. То есть, тип <code class="content__code_inline">B</code> будет совместим с типом <code class="content__code_inline">A</code> только тогда, когда он является его предком (<code class="content__code_inline">extends</code>). Кроме того, тип <code class="content__code_inline">B</code> будет совместим с интерфейсом <code class="content__code_inline">IA</code> только в том случае, если он или один из его предков реализует его явно (<code class="content__code_inline">implements</code>).</p>
<p><div class="ant-image" style="width:100%;height:200"><img alt="" class="ant-image-img" style="height:200" src="https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/nominative-types-nominative-principle.png"/></div></p>
<p>Как можно понять по изображению выше, при проверке на совместимость типа <code class="content__code_inline">Bird</code> с типом <code class="content__code_inline">Animal</code> компилятор обходит дерево в поисках наличия ссылки на тип <code class="content__code_inline">Animal</code> и обнаружив её, приходит к выводу, что типы совместимы. Тот же самый процесс требуется для установления совместимости типа <code class="content__code_inline">Bird</code> с типом интерфейса <code class="content__code_inline">INameable</code>. Полная картина совместимости изображена на диаграмме ниже.</p>
<p><div class="ant-image" style="width:100%;height:200"><img alt="" class="ant-image-img" style="height:200" src="https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/nominative-types-nominative-compatible.png"/></div></p>
<p>Номинативная типизация присуща исключительно статически типизированным языкам.</p>
<p>К языкам с номинативной типизацией относятся <em>Java</em>, <em>C#</em> и другие.</p></section><section id="Strukturnaya_Tipizaciya_(structural_typing)" class="content__section"><h2 class="content__heading">Структурная Типизация (structural typing)</h2>
<p><em>Структурная типизация</em> — это принцип, определяющий совместимость типов основываясь не на иерархии наследования или явной реализации интерфейсов, а на их описании.</p>
<p><div class="ant-image" style="width:100%;height:200"><img alt="" class="ant-image-img" style="height:200" src="https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/nominative-types-structural-principle.png"/></div></p>
<p>Компилятор считает типы совместимыми, если сопоставляемый тип имеет все признаки типа, с которым сопоставляется. Чтобы быть совместимым, сопоставляемый тип должен иметь те же ключи с теми же (идентичными или совместимыми) типами, что и тип, с которым происходит сопоставление. Полная картина совместимости в структурной типизации изображена на диаграмме ниже.</p>
<p><div class="ant-image" style="width:100%;height:200"><img alt="" class="ant-image-img" style="height:200" src="https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/nominative-types-structural-compatible.png"/></div></p>
<p>Структурная типизация присуща исключительно языкам с явной типизацией (глава <a href="../007.(%D0%AD%D0%BA%D1%81%D0%BA%D1%83%D1%80%D1%81%20%D0%B2%20%D1%82%D0%B8%D0%BF%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8E)%20%D0%A1%D0%B8%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F%20%D0%B8%20%D1%81%D0%BB%D0%B0%D0%B1%D0%B0%D1%8F%20%D1%82%D0%B8%D0%BF%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F">“Экскурс в типизацию - Сильная и слабая типизация”</a>).</p>
<p>К языкам со структурной типизацией относятся <em>TypeScript</em>, <em>Scala</em> и им подобные.</p></section><section id="Utinaya_Tipizaciya_(Duck_typing)" class="content__section"><h2 class="content__heading">Утиная Типизация (Duck typing)</h2>
<p><em>Утиная типизация</em>, как и в случае со структурной типизацией — это принцип, определяющий совместимость типов основываясь не на иерархии наследования или явной реализации интерфейсов, а на их описании. Утиная типизация ничем не отличается от структурной, за исключением того, что присуща лишь языкам с <em>динамическим связыванием</em> (динамическая типизация).</p>
<p>Термин «Утиная типизация» произошёл от английского выражения <em>duck test</em>, который в оригинале звучит как: <em>&quot;Если это выглядит как утка, плавает как утка и крякает как утка, то это, вероятно, и есть утка&quot;</em>.</p>
<p>Так как утиная типизация не отличается от структурной, то в качестве примеров совместимости можно воспользоваться диаграммой из предыдущего раздела, посвященного структурной типизации.</p>
<p>К языкам с утиной типизацией относятся <em>Python</em>, <em>JavaScript</em> и другие.</p></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="Yavnaya_i_neyavnaya_tipizaciya" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label">Явная и неявная типизация</span></div></a><a href="Sovmestimost_tipov_na_osnove_variantnosti" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label">Совместимость типов на основе вариантности</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn page-nav__btn_next-page"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"urlResolver":{"image":"https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/009.(Экскурс в типизацию) Совместимость типов на основе вида типизации/images/"},"sectionInfoAll":[{"key":"Совместимость типов на основе вида типизации","elementId":"Sovmestimost_tipov_na_osnove_vida_tipizacii","markdown":"# Совместимость типов на основе вида типизации\nКаждый раз при присваивании значения компилятор подвергает его проверке на совместимость с ожидаемым типом. Компилятор словно секюрити стоящий на фейсконтроле ночного клуба решает пропускать или нет то, или иное значение. Подобные решения принимаются на основании правил, которые зависят не только клуба (языка программирования), но также вида проводимых мероприятий. Понять логику на которую опирается компилятор при определении совместимости нам поможет текущая и следующая глава. Но сначала давайте выведем правило самой совместимости."},{"key":"Совместимость типов на основе вида типизации_0","elementId":"Sovmestimost_tipov_(Types_Compatibility)","markdown":"## Совместимость типов (Types Compatibility)\n\n_Совместимость типов_ — это совокупность правил, на основе которых программа, анализируя два типа, принимает решение о возможности одного типа заменить другой таким образом, что бы замена не нарушила выполнение программы. Простыми словами, совместимость типов — это механизм, по которому происходит сопоставление типов.\n\nСуществует несколько основных механизмов и выбор конкретного зависит от случая, при котором возникает потребность сопоставления типов данных. Один из таких механизмов состоит из совокупности правил составляющих такое понятие как типизация. Из существующего множества правил можно выделить несколько групп, которые образуют три вида типизации — _номинативную_, _структурную_ и _утиную_.\n\nЧтобы различия между ними были более очевидными, все они будут рассматриваться на одном примере, диаграмма которого показана ниже.\n\n![](./images/nominative-types-shared.png)"},{"key":"Совместимость типов на основе вида типизации_1","elementId":"Nominativnaya_Tipizaciya_(nominative_typing)","markdown":"## Номинативная Типизация (nominative typing)\n\n_Номинативная типизация_ (nominative typing) устанавливает совместимость типов основываясь на идентификаторах типов (ссылках). Простыми словами, при проверке на совместимость компилятор проверяет иерархию типов на признаки наследования и реализацию интерфейсов. То есть, тип `B` будет совместим с типом `A` только тогда, когда он является его предком (`extends`). Кроме того, тип `B` будет совместим с интерфейсом `IA` только в том случае, если он или один из его предков реализует его явно (`implements`).\n\n![](./images/nominative-types-nominative-principle.png)\n\nКак можно понять по изображению выше, при проверке на совместимость типа `Bird` с типом `Animal` компилятор обходит дерево в поисках наличия ссылки на тип `Animal` и обнаружив её, приходит к выводу, что типы совместимы. Тот же самый процесс требуется для установления совместимости типа `Bird` с типом интерфейса `INameable`. Полная картина совместимости изображена на диаграмме ниже.\n\n![](./images/nominative-types-nominative-compatible.png)\n\nНоминативная типизация присуща исключительно статически типизированным языкам.\n\nК языкам с номинативной типизацией относятся _Java_, _C#_ и другие."},{"key":"Совместимость типов на основе вида типизации_2","elementId":"Strukturnaya_Tipizaciya_(structural_typing)","markdown":"## Структурная Типизация (structural typing)\n\n_Структурная типизация_ — это принцип, определяющий совместимость типов основываясь не на иерархии наследования или явной реализации интерфейсов, а на их описании.\n\n![](./images/nominative-types-structural-principle.png)\n\nКомпилятор считает типы совместимыми, если сопоставляемый тип имеет все признаки типа, с которым сопоставляется. Чтобы быть совместимым, сопоставляемый тип должен иметь те же ключи с теми же (идентичными или совместимыми) типами, что и тип, с которым происходит сопоставление. Полная картина совместимости в структурной типизации изображена на диаграмме ниже.\n\n![](./images/nominative-types-structural-compatible.png)\n\nСтруктурная типизация присуща исключительно языкам с явной типизацией (глава [“Экскурс в типизацию - Сильная и слабая типизация”](../007.(Экскурс%20в%20типизацию)%20Сильная%20и%20слабая%20типизация)).\n\nК языкам со структурной типизацией относятся _TypeScript_, _Scala_ и им подобные."},{"key":"Совместимость типов на основе вида типизации_3","elementId":"Utinaya_Tipizaciya_(Duck_typing)","markdown":"## Утиная Типизация (Duck typing)\n\n_Утиная типизация_, как и в случае со структурной типизацией — это принцип, определяющий совместимость типов основываясь не на иерархии наследования или явной реализации интерфейсов, а на их описании. Утиная типизация ничем не отличается от структурной, за исключением того, что присуща лишь языкам с _динамическим связыванием_ (динамическая типизация).\n\nТермин «Утиная типизация» произошёл от английского выражения _duck test_, который в оригинале звучит как: _\"Если это выглядит как утка, плавает как утка и крякает как утка, то это, вероятно, и есть утка\"_.\n\nТак как утиная типизация не отличается от структурной, то в качестве примеров совместимости можно воспользоваться диаграммой из предыдущего раздела, посвященного структурной типизации.\n\nК языкам с утиной типизацией относятся _Python_, _JavaScript_ и другие."}],"githubFileInfo":{"lastUpdate":1616400513000,"contributorAll":[{"name":"Bohdan Petrov","avatar":"https://avatars.githubusercontent.com/u/35348648?v=4","bio":"Front-end developer","githubUrl":"https://github.com/mindyourlifeguide"},{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"pageNav":{"isPrevPage":true,"isNextPage":true,"prevPage":{"title":"Явная и неявная типизация","path":"Yavnaya_i_neyavnaya_tipizaciya"},"nextPage":{"title":"Совместимость типов на основе вариантности","path":"Sovmestimost_tipov_na_osnove_variantnosti"}},"contentNavData":{"key":"Совместимость типов на основе вида типизации","level":0,"index":9,"contentIndex":0,"section":"Экскурс в типизацию","title":"Совместимость типов на основе вида типизации","path":"Sovmestimost_tipov_na_osnove_vida_tipizacii","elementId":"Sovmestimost_tipov_na_osnove_vida_tipizacii","children":[{"key":"Совместимость типов на основе вида типизации_0","index":0,"contentIndex":1,"level":1,"section":"Экскурс в типизацию","title":"Совместимость типов (Types Compatibility)","path":"Sovmestimost_tipov_(Types_Compatibility)","elementId":"Sovmestimost_tipov_(Types_Compatibility)"},{"key":"Совместимость типов на основе вида типизации_1","index":1,"contentIndex":2,"level":1,"section":"Экскурс в типизацию","title":"Номинативная Типизация (nominative typing)","path":"Nominativnaya_Tipizaciya_(nominative_typing)","elementId":"Nominativnaya_Tipizaciya_(nominative_typing)"},{"key":"Совместимость типов на основе вида типизации_2","index":2,"contentIndex":3,"level":1,"section":"Экскурс в типизацию","title":"Структурная Типизация (structural typing)","path":"Strukturnaya_Tipizaciya_(structural_typing)","elementId":"Strukturnaya_Tipizaciya_(structural_typing)"},{"key":"Совместимость типов на основе вида типизации_3","index":3,"contentIndex":4,"level":1,"section":"Экскурс в типизацию","title":"Утиная Типизация (Duck typing)","path":"Utinaya_Tipizaciya_(Duck_typing)","elementId":"Utinaya_Tipizaciya_(Duck_typing)"}]}},"__N_SSG":true},"page":"/book/chapters/[chapterId]","query":{"chapterId":"Sovmestimost_tipov_na_osnove_vida_tipizacii"},"buildId":"wm38oMjLpjy8eoMz2Xf2L","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>